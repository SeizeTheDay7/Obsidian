- [[#MySQL|MySQL]]
	- [[#MySQL#단축키|단축키]]
	- [[#MySQL#명령어|명령어]]
		- [[#명령어#테이블 만들기|테이블 만들기]]
		- [[#명령어#SELECT 절의 형식|SELECT 절의 형식]]
		- [[#명령어#인덱스|인덱스]]
		- [[#명령어#뷰|뷰]]
		- [[#명령어#스토어드 프로시저|스토어드 프로시저]]
- [[#SQLD 이론|SQLD 이론]]


## MySQL
<hr>

### 단축키

`Ctrl+Enter` : 커서가 있는 1개의 SQL문 실행 (세미콜론 끝날때까지)
`Ctrl+Shift+Enter` : 모든 SQL문 실행 (드래그하면 그 부분만 실행)

### MySQL에서 주석 작성 방법

1. `#` 으로 작성
2. `--` : 마이너스 기호 2번 작성
3. `/* ~ */` : 여러 개의 줄을 한번에 주석 처리 

### 명령어

```mysql
SHOW DATABASES; # 데이터베이스 전부 보여줌
```

```mysql
CREATE SCHEMA '데이터베이스이름'; # 데이터베이스 만듦
```

```mysql
USE 데이터베이스이름; # 앞으로 모든 SQL 문이 해당 데이터베이스에서 수행됨
# 아니면 MySQL에서 데이터베이스 더블클릭해도 됨.
```
#### 테이블 만들기
```mysql
CREATE TABLE `shop_db`.`member` ( # 'shop_db'에 'member'테이블을 만든다.
  `member_id` CHAR(8) NOT NULL,
  `member_name` CHAR(5) NOT NULL, # 그 안에 칼럼 3개를 만든다.
  `member_addr` VARCHAR(45) NULL, # NOT NULL은 NULL값 허용 안한다는 뜻
  PRIMARY KEY (`member_id`)); # PK는 'member_id'이다.
```
#### SELECT
```mysql
SELECT 칼럼이름 # 순서가 맞지 않으면 오류 발생
	FROM 테이블이름
	WHERE 조건식
	GROUP BY 칼럼이름
	HAVING 조건식
	ORDER BY 칼럼이름
	LIMIT 숫자
```

```mysql
SELECT * FROM 데이터베이스이름.테이블이름; # 모든 데이터 가져옴

SELECT 칼럼이름1, 칼럼이름2 FROM 테이블이름; # 특정 속성만 가져옴
SELECT 칼럼이름1 별칭1, 칼럼이름2 '별칭 2' FROM 테이블이름; # 칼럼 이름을 별칭으로 표시

SELECT * FROM 테이블이름 WHERE 칼럼이름='특정값'; # 특정 속성값만 가져옴 
SELECT * FROM 테이블이름 WHERE 칼럼이름>=값 AND 칼럼이름2<값 ; # 조건 2개 만족하는거 조회
	# 조건 : AND, OR, BETWEEN 값1 AND 값2

SELECT * FROM 테이블이름 WHERE 칼럼이름 IN('값1', '값2', '값3'); # 조건에 포함되는거 조회
SELECT * FROM 테이블이름 WHERE 칼럼이름 LIKE '우%'; # 우설, 우산꽂이 등 조회
SELECT * FROM 테이블이름 WHERE 칼럼이름 LIKE '__핑크'; # 무적핑크, 블랙핑크 등 조회
```
#### ORDER BY
```mysql
SELECT * FROM 테이블이름 ORDER BY 칼럼이름; # 특정 칼럼 기준으로 정렬
SELECT * FROM 테이블이름 ORDER BY 칼럼이름 DESC; # 내림차순 정렬 
```
#### INDEX
```mysql
CREATE INDEX 인덱스이름 ON 데이터베이스이름.테이블이름(칼럼이름); 
# 인덱스를 만들어서 더 빠르게 조회
```
#### VIEW
```mysql
CREATE VIEW 뷰이름 # 뷰(유저에게 보여줄 쿼리의 변수명) 만들기
AS
	SELECT * FROM 테이블이름;

SELECT * FROM 뷰이름; # 뷰 불러오기
```
#### Stored Procedure
```mysql
DELIMITER //  # 스토어드 프로시저를 묶어주는 양식
CREATE PROCEDURE 프로시저이름()
BEGIN
	실행하고자하는쿼리들;
END //
DELIMITER ;

CALL 프로시저이름(); # 프로시저 호출
```


## SQLD 이론
<hr>

개별적 관점의 외부 스키마를 모아서  
통합적 관점의 개념 스키마를 만들고, 그로부터  
물리적으로 저장하는 내부 스키마를 만든다  
  
엔터티 발생시점 분류 : 기본, 중심, 행위  
  
기본 속성 : 원래속성  
설계 속성 : 1:1치환  
파생 속성 : 계산값  
  
대표성 갖는지 : 주식별자/보조식별자  
스스로 생성됐는지 : 내부식별자/외부식별자  
단일 속성으로 식별되는지 : 단일식별자/복합식별자  
업무적으로 의미있는지 : 본질식별자/인조식별자  
  
이름은 주식별자 쓰면 안된다  
  
슈퍼키(식별만 되면 됨) > 후보키(더 뺄 수 없음) > 기본키(유일)  
후보키 중에 기본키 아닌거 : 대체키  
  
2차 정규화할 때 기본키가 복합키면 복합키 기준으로 나눔  
  
속성 여러개를 다시 묶는건 1차 정규화 (이미 1차 정규화 돼있는것도 가능)  
  
정규화는 논리 데이터 모델 일관성 확보  
  
식별 관계 : 부모 테이블의 기본키를 자식의 기본키로 사용  
비식별 관계 : 부모 테이블의 기본키를 자식에서 외래키로 사용  
  
NULL 값에 숫자 더해도 NULL, 비교하면 FALSE 또는 unknown, 집계 함수 계산에선 아예 빠짐

![](다운로드.png)

트랜잭션 : 데이터베이스 read, write 연산 수행하는 단위
트랜잭션의 ACID 원리
Atomicity : 트랜잭션의 수행은 성공하든지 실패해야 함
Consistency : 트랜잭션은 데이터의 일관성을 보장해야 함
Isolation : 동시에 수행되지 않고 각각 고립되어 실행되어야 함
Durability : 완료(commit)된 뒤에, 데이터가 유실되지 않아야 함

유일성 : 각각을 식별할 수 있는지
최소성 : 더 적은 속성으로 식별할 수 있는지
슈퍼키 : 유일성 확보된 모든 키
대체키 : 기본키 아닌 후보키
후보키 : 최소성, 유일성 만족한 키
기본키 : 후보키 중 하나만 고른 키

엔터티의 요건
1. 업무에서 필요하고 관리하고자 하는 정보
2. 유일한 식별자가 있어야 함
3. 한 개가 아니라 두 개 이상의 인스턴스 존재
4. 업무 프로세스에 의해 이용됨
5. 속성이 있어야 함
6. 다른 엔터티와 한 개 이상의 관계 있음 (코드, 통계 엔터티는 편의상 생략)

비식별자 관계 : 주 식별자에 부모의 식별자 사용 안 함

기본 속성 : 업무상 수집된 기본 속성
설계 속성 : 코드 등 시스템에서 만든 속성
파생 속성 : 계산값이나 영향 받은 값

[정리글](https://mangkyu.tistory.com/110)
제1 정규화 : 한 칸에 데이터 하나만 (속성 묶는 것도 가능)  
제2 정규화 : 기본키로 찾을 수 있는 속성은 key-value 테이블로 따로 빼기  
제3 정규화 : 다른 키로 찾을 수 있는 속성은 테이블로 따로 빼기  
  
슈퍼/서브 타입 데이터 모델 : 객체 지향 상속이랑 비슷함


| 분류                                                | 설명                                                                |                     주요 명령어                      |
| :------------------------------------------------ | :---------------------------------------------------------------- | :---------------------------------------------: |
| 데이터 정의어<br>(DDL : Data <br>Definition Language)   | 데이터와 데이터간의 <br>관계 정의를 위한 언어.<br>데이터 구조 또는 객체를<br>생성, 변경, 삭제하는데 사용 |        CREATE<br>ALTER<br>DROP<br>RENAME        |
| 데이터 조작어<br>(DML : Data <br>Manipulation Language) | 데이터베이스 사용자 또는<br>응용 프로그램의 데이터<br>검색, 등록, 삭제, 갱신에 쓰임               | SELECT, FROM<br>WHERE, INSERT<br>UPDATE, DELETE |
| 데이터 제어어<br>(DCL : Data <br>Control Language)      | 데이터에 대한 액세스를 제어<br>하기 위한 언어.<br>데이터 보안, 무결성, 병행수행<br>제어에 사용됨.     |      GRANT<br>REVOKE<br>COMMIT<br>ROLLBACK      |

